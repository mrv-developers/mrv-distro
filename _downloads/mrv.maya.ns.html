<html>
<head>
<title>mrv.maya.ns</title>
</head>
<body>
mrv.maya.ns
<style>
.coverage pre {float: left; margin: 0px 1em; border: none;
               padding: 0px; }
.num pre { margin: 0px }
.nocov, .nocov pre {background-color: #faa}
.cov, .cov pre {background-color: #cfc}
div.coverage div { clear: both; height: 1.1em}
</style>
<div class="stats">
Covered: 313 lines<br/>
Missed: 27 lines<br/>
Skipped 149 lines<br/>
Percent: 92 %<br/>

</div>
<div class="coverage">
<div class="skip"><span class="num"><pre>  1</pre></span><pre># -*- coding: utf-8 -*-</pre></div>
<div class="cov"><span class="num"><pre>  2</pre></span><pre>&quot;&quot;&quot;</pre></div>
<div class="cov"><span class="num"><pre>  3</pre></span><pre>Allows convenient access and handling of namespaces in an object oriented manner</pre></div>
<div class="cov"><span class="num"><pre>  4</pre></span><pre>&quot;&quot;&quot;</pre></div>
<div class="cov"><span class="num"><pre>  5</pre></span><pre>__docformat__ = &quot;restructuredtext&quot;</pre></div>
<div class="skip"><span class="num"><pre>  6</pre></span><pre></pre></div>
<div class="cov"><span class="num"><pre>  7</pre></span><pre>import undo</pre></div>
<div class="cov"><span class="num"><pre>  8</pre></span><pre>from mrv.maya.util import noneToList</pre></div>
<div class="cov"><span class="num"><pre>  9</pre></span><pre>from mrv.interface import iDagItem</pre></div>
<div class="cov"><span class="num"><pre> 10</pre></span><pre>from mrv.util import CallOnDeletion</pre></div>
<div class="cov"><span class="num"><pre> 11</pre></span><pre>import maya.cmds as cmds</pre></div>
<div class="cov"><span class="num"><pre> 12</pre></span><pre>import maya.OpenMaya as api</pre></div>
<div class="cov"><span class="num"><pre> 13</pre></span><pre>import re</pre></div>
<div class="skip"><span class="num"><pre> 14</pre></span><pre></pre></div>
<div class="cov"><span class="num"><pre> 15</pre></span><pre>__all__ = (&quot;Namespace&quot;, &quot;createNamespace&quot;, &quot;currentNamespace&quot;, &quot;findUniqueNamespace&quot;, </pre></div>
<div class="cov"><span class="num"><pre> 16</pre></span><pre>           &quot;existsNamespace&quot;, &quot;RootNamespace&quot;)</pre></div>
<div class="skip"><span class="num"><pre> 17</pre></span><pre></pre></div>
<div class="skip"><span class="num"><pre> 18</pre></span><pre>#{ internal utilties</pre></div>
<div class="cov"><span class="num"><pre> 19</pre></span><pre>def _isRootOf( root, other ):</pre></div>
<div class="cov"><span class="num"><pre> 20</pre></span><pre>	&quot;&quot;&quot;:return: True if other which may be a string, is rooted at 'root</pre></div>
<div class="cov"><span class="num"><pre> 21</pre></span><pre>	:param other: '' = root namespace'</pre></div>
<div class="cov"><span class="num"><pre> 22</pre></span><pre>		hello:world =&gt; :hello:world</pre></div>
<div class="cov"><span class="num"><pre> 23</pre></span><pre>	:param root: may be namespace or string. It must not have a ':' in front, </pre></div>
<div class="cov"><span class="num"><pre> 24</pre></span><pre>		hence it must be a relative naespace, and must end with a ':'.</pre></div>
<div class="cov"><span class="num"><pre> 25</pre></span><pre>	:note: the arguments are very specific, but this allows the method </pre></div>
<div class="cov"><span class="num"><pre> 26</pre></span><pre>		to be faster than usual&quot;&quot;&quot;</pre></div>
<div class="cov"><span class="num"><pre> 27</pre></span><pre>	return (other+':').startswith(root)</pre></div>
<div class="skip"><span class="num"><pre> 28</pre></span><pre>#} END internal utilities</pre></div>
<div class="skip"><span class="num"><pre> 29</pre></span><pre></pre></div>
<div class="cov"><span class="num"><pre> 30</pre></span><pre>class Namespace( unicode, iDagItem ):</pre></div>
<div class="cov"><span class="num"><pre> 31</pre></span><pre>	&quot;&quot;&quot; Represents a Maya namespace</pre></div>
<div class="cov"><span class="num"><pre> 32</pre></span><pre>	Namespaces follow the given nameing conventions:</pre></div>
<div class="skip"><span class="num"><pre> 33</pre></span><pre>	</pre></div>
<div class="cov"><span class="num"><pre> 34</pre></span><pre>	 - Paths starting with a column are absolute</pre></div>
<div class="skip"><span class="num"><pre> 35</pre></span><pre>	 </pre></div>
<div class="cov"><span class="num"><pre> 36</pre></span><pre>	  - :absolute:path</pre></div>
<div class="skip"><span class="num"><pre> 37</pre></span><pre>	  </pre></div>
<div class="cov"><span class="num"><pre> 38</pre></span><pre>	 - Path separator is ':'</pre></div>
<div class="cov"><span class="num"><pre> 39</pre></span><pre>	 &quot;&quot;&quot;</pre></div>
<div class="cov"><span class="num"><pre> 40</pre></span><pre>	re_find_duplicate_sep = re.compile( &quot;:{2,}&quot; )</pre></div>
<div class="cov"><span class="num"><pre> 41</pre></span><pre>	_sep = ':'</pre></div>
<div class="cov"><span class="num"><pre> 42</pre></span><pre>	rootpath = ':'</pre></div>
<div class="cov"><span class="num"><pre> 43</pre></span><pre>	_defaultns = [ 'UI','shared' ]			# default namespaces that we want to ignore in our listings</pre></div>
<div class="cov"><span class="num"><pre> 44</pre></span><pre>	defaultIncrFunc = lambda b,i: &quot;%s%02i&quot; % ( b,i )</pre></div>
<div class="skip"><span class="num"><pre> 45</pre></span><pre>	</pre></div>
<div class="skip"><span class="num"><pre> 46</pre></span><pre>	# to keep instance small</pre></div>
<div class="cov"><span class="num"><pre> 47</pre></span><pre>	__slots__ = tuple()</pre></div>
<div class="skip"><span class="num"><pre> 48</pre></span><pre></pre></div>
<div class="skip"><span class="num"><pre> 49</pre></span><pre>	#{ Overridden Methods</pre></div>
<div class="skip"><span class="num"><pre> 50</pre></span><pre></pre></div>
<div class="cov"><span class="num"><pre> 51</pre></span><pre>	def __new__( cls, namespacepath=rootpath, absolute = True ):</pre></div>
<div class="cov"><span class="num"><pre> 52</pre></span><pre>		&quot;&quot;&quot;Initialize the namespace with the given namespace path</pre></div>
<div class="skip"><span class="num"><pre> 53</pre></span><pre>		</pre></div>
<div class="cov"><span class="num"><pre> 54</pre></span><pre>		:param namespacepath: the namespace to wrap - it should be absolut to assure</pre></div>
<div class="cov"><span class="num"><pre> 55</pre></span><pre>			relative namespaces will not be interpreted in an unforseen manner ( as they</pre></div>
<div class="cov"><span class="num"><pre> 56</pre></span><pre>			are relative to the currently set namespace</pre></div>
<div class="skip"><span class="num"><pre> 57</pre></span><pre>			</pre></div>
<div class="cov"><span class="num"><pre> 58</pre></span><pre>			Set it &quot;:&quot; ( or &quot;&quot; ) to describe the root namespace</pre></div>
<div class="cov"><span class="num"><pre> 59</pre></span><pre>		:param absolute: if True, incoming namespace names will be made absolute if not yet the case</pre></div>
<div class="cov"><span class="num"><pre> 60</pre></span><pre>		:note: the namespace does not need to exist, but many methods will not work if so.</pre></div>
<div class="cov"><span class="num"><pre> 61</pre></span><pre>			NamespaceObjects returned by methods of this class are garantueed to exist&quot;&quot;&quot;</pre></div>
<div class="skip"><span class="num"><pre> 62</pre></span><pre></pre></div>
<div class="cov"><span class="num"><pre> 63</pre></span><pre>		if namespacepath != cls.rootpath:</pre></div>
<div class="cov"><span class="num"><pre> 64</pre></span><pre>			if absolute:</pre></div>
<div class="cov"><span class="num"><pre> 65</pre></span><pre>				if not namespacepath.startswith( &quot;:&quot; ):		# do not force absolute namespace !</pre></div>
<div class="cov"><span class="num"><pre> 66</pre></span><pre>					namespacepath = &quot;:&quot; + namespacepath</pre></div>
<div class="skip"><span class="num"><pre> 67</pre></span><pre>			# END if absolute</pre></div>
<div class="cov"><span class="num"><pre> 68</pre></span><pre>			if len( namespacepath ) &gt; 1 and namespacepath.endswith( &quot;:&quot; ):</pre></div>
<div class="nocov"><span class="num"><pre> 69</pre></span><pre>				namespacepath = namespacepath[:-1]</pre></div>
<div class="skip"><span class="num"><pre> 70</pre></span><pre>		# END if its not the root namespace</pre></div>
<div class="cov"><span class="num"><pre> 71</pre></span><pre>		return unicode.__new__( cls, namespacepath )</pre></div>
<div class="skip"><span class="num"><pre> 72</pre></span><pre></pre></div>
<div class="cov"><span class="num"><pre> 73</pre></span><pre>	def __add__( self, other ):</pre></div>
<div class="cov"><span class="num"><pre> 74</pre></span><pre>		&quot;&quot;&quot;Properly catenate namespace objects - other must be relative namespace or</pre></div>
<div class="cov"><span class="num"><pre> 75</pre></span><pre>		object name ( with or without namespace )</pre></div>
<div class="skip"><span class="num"><pre> 76</pre></span><pre>		</pre></div>
<div class="cov"><span class="num"><pre> 77</pre></span><pre>		:return: new string object &quot;&quot;&quot;</pre></div>
<div class="cov"><span class="num"><pre> 78</pre></span><pre>		inbetween = self._sep</pre></div>
<div class="cov"><span class="num"><pre> 79</pre></span><pre>		if self.endswith( self._sep ) or other.startswith( self._sep ):</pre></div>
<div class="cov"><span class="num"><pre> 80</pre></span><pre>			inbetween = ''</pre></div>
<div class="skip"><span class="num"><pre> 81</pre></span><pre></pre></div>
<div class="cov"><span class="num"><pre> 82</pre></span><pre>		return &quot;%s%s%s&quot; % ( self, inbetween, other )</pre></div>
<div class="skip"><span class="num"><pre> 83</pre></span><pre></pre></div>
<div class="cov"><span class="num"><pre> 84</pre></span><pre>	def __repr__( self ):</pre></div>
<div class="nocov"><span class="num"><pre> 85</pre></span><pre>		return &quot;Namespace('%s')&quot; % str( self )</pre></div>
<div class="skip"><span class="num"><pre> 86</pre></span><pre>	#}END Overridden Methods</pre></div>
<div class="skip"><span class="num"><pre> 87</pre></span><pre></pre></div>
<div class="skip"><span class="num"><pre> 88</pre></span><pre>	#{Edit Methods</pre></div>
<div class="cov"><span class="num"><pre> 89</pre></span><pre>	@classmethod</pre></div>
<div class="cov"><span class="num"><pre> 90</pre></span><pre>	@undo.undoable</pre></div>
<div class="cov"><span class="num"><pre> 91</pre></span><pre>	def create( cls, namespaceName ):</pre></div>
<div class="cov"><span class="num"><pre> 92</pre></span><pre>		&quot;&quot;&quot;Create a new namespace</pre></div>
<div class="skip"><span class="num"><pre> 93</pre></span><pre>		</pre></div>
<div class="cov"><span class="num"><pre> 94</pre></span><pre>		:param namespaceName: the name of the namespace, absolute or relative -</pre></div>
<div class="cov"><span class="num"><pre> 95</pre></span><pre>			it may contain subspaces too, i.e. :foo:bar.</pre></div>
<div class="cov"><span class="num"><pre> 96</pre></span><pre>			fred:subfred is a relative namespace, created in the currently active namespace</pre></div>
<div class="cov"><span class="num"><pre> 97</pre></span><pre>		:note: if the target namespace already exists, it will be returned</pre></div>
<div class="cov"><span class="num"><pre> 98</pre></span><pre>		:return: the create Namespace object&quot;&quot;&quot;</pre></div>
<div class="cov"><span class="num"><pre> 99</pre></span><pre>		newns = cls( namespaceName )</pre></div>
<div class="skip"><span class="num"><pre>100</pre></span><pre></pre></div>
<div class="cov"><span class="num"><pre>101</pre></span><pre>		if newns.exists():		 # skip work</pre></div>
<div class="cov"><span class="num"><pre>102</pre></span><pre>			return newns</pre></div>
<div class="skip"><span class="num"><pre>103</pre></span><pre></pre></div>
<div class="cov"><span class="num"><pre>104</pre></span><pre>		cleanup = CallOnDeletion( None )</pre></div>
<div class="cov"><span class="num"><pre>105</pre></span><pre>		if newns.isAbsolute():	# assure root is current if we are having an absolute name</pre></div>
<div class="cov"><span class="num"><pre>106</pre></span><pre>			previousns = Namespace.current()</pre></div>
<div class="cov"><span class="num"><pre>107</pre></span><pre>			cls( Namespace.rootpath ).setCurrent( )</pre></div>
<div class="cov"><span class="num"><pre>108</pre></span><pre>			cleanup.callableobj = lambda : previousns.setCurrent()</pre></div>
<div class="skip"><span class="num"><pre>109</pre></span><pre></pre></div>
<div class="skip"><span class="num"><pre>110</pre></span><pre>		# create each token accordingly ( its not root here )</pre></div>
<div class="cov"><span class="num"><pre>111</pre></span><pre>		tokens = newns.split( newns._sep )</pre></div>
<div class="cov"><span class="num"><pre>112</pre></span><pre>		for i,token in enumerate( tokens ):		# skip the root namespac</pre></div>
<div class="cov"><span class="num"><pre>113</pre></span><pre>			base = cls( ':'.join( tokens[:i+1] ) )</pre></div>
<div class="cov"><span class="num"><pre>114</pre></span><pre>			if base.exists( ):</pre></div>
<div class="cov"><span class="num"><pre>115</pre></span><pre>				continue</pre></div>
<div class="skip"><span class="num"><pre>116</pre></span><pre></pre></div>
<div class="skip"><span class="num"><pre>117</pre></span><pre>			# otherwise add the baes to its parent ( that should exist</pre></div>
<div class="skip"><span class="num"><pre>118</pre></span><pre>			# put operation on the queue - as we create empty namespaces, we can delete</pre></div>
<div class="skip"><span class="num"><pre>119</pre></span><pre>			# them at any time</pre></div>
<div class="cov"><span class="num"><pre>120</pre></span><pre>			op = undo.GenericOperation( )</pre></div>
<div class="cov"><span class="num"><pre>121</pre></span><pre>			op.setDoitCmd( cmds.namespace, p=base.parent() , add=base.basename() )</pre></div>
<div class="cov"><span class="num"><pre>122</pre></span><pre>			op.setUndoitCmd(cmds.namespace, rm=base )</pre></div>
<div class="cov"><span class="num"><pre>123</pre></span><pre>			op.doIt( )</pre></div>
<div class="skip"><span class="num"><pre>124</pre></span><pre>		# END for each token</pre></div>
<div class="skip"><span class="num"><pre>125</pre></span><pre></pre></div>
<div class="cov"><span class="num"><pre>126</pre></span><pre>		return newns</pre></div>
<div class="skip"><span class="num"><pre>127</pre></span><pre></pre></div>
<div class="cov"><span class="num"><pre>128</pre></span><pre>	def rename( self, newName ):</pre></div>
<div class="cov"><span class="num"><pre>129</pre></span><pre>		&quot;&quot;&quot;Rename this namespace to newName - the original namespace will cease to exist</pre></div>
<div class="skip"><span class="num"><pre>130</pre></span><pre>		</pre></div>
<div class="cov"><span class="num"><pre>131</pre></span><pre>		:note: if the namespace already exists, the existing one will be returned with</pre></div>
<div class="cov"><span class="num"><pre>132</pre></span><pre>			all objects from this one added accordingly</pre></div>
<div class="cov"><span class="num"><pre>133</pre></span><pre>		:param newName: the absolute name of the new namespace</pre></div>
<div class="cov"><span class="num"><pre>134</pre></span><pre>		:return: Namespace with the new name</pre></div>
<div class="cov"><span class="num"><pre>135</pre></span><pre>		:todo: Implement undo !&quot;&quot;&quot;</pre></div>
<div class="cov"><span class="num"><pre>136</pre></span><pre>		newnamespace = self.__class__( newName )</pre></div>
<div class="skip"><span class="num"><pre>137</pre></span><pre></pre></div>
<div class="skip"><span class="num"><pre>138</pre></span><pre></pre></div>
<div class="skip"><span class="num"><pre>139</pre></span><pre>		# recursively move children</pre></div>
<div class="cov"><span class="num"><pre>140</pre></span><pre>		def moveChildren( curparent, newname ):</pre></div>
<div class="cov"><span class="num"><pre>141</pre></span><pre>			for child in curparent.children( ):</pre></div>
<div class="cov"><span class="num"><pre>142</pre></span><pre>				moveChildren( child, newname + child.basename( ) )</pre></div>
<div class="skip"><span class="num"><pre>143</pre></span><pre>			# all children should be gone now, move the</pre></div>
<div class="cov"><span class="num"><pre>144</pre></span><pre>			curparent.delete( move_to_namespace = newname, autocreate=True )</pre></div>
<div class="skip"><span class="num"><pre>145</pre></span><pre>		# END internal method</pre></div>
<div class="cov"><span class="num"><pre>146</pre></span><pre>		moveChildren( self, newnamespace )</pre></div>
<div class="cov"><span class="num"><pre>147</pre></span><pre>		return newnamespace</pre></div>
<div class="skip"><span class="num"><pre>148</pre></span><pre></pre></div>
<div class="cov"><span class="num"><pre>149</pre></span><pre>	def moveNodes( self, targetNamespace, force = True, autocreate=True ):</pre></div>
<div class="cov"><span class="num"><pre>150</pre></span><pre>		&quot;&quot;&quot;Move objects from this to the targetNamespace</pre></div>
<div class="skip"><span class="num"><pre>151</pre></span><pre>		</pre></div>
<div class="cov"><span class="num"><pre>152</pre></span><pre>		:param force: if True, namespace clashes will be resolved by renaming, if false</pre></div>
<div class="cov"><span class="num"><pre>153</pre></span><pre>			possible clashes would result in an error</pre></div>
<div class="cov"><span class="num"><pre>154</pre></span><pre>		:param autocreate: if True, targetNamespace will be created if it does not exist yet</pre></div>
<div class="cov"><span class="num"><pre>155</pre></span><pre>		:todo: Implement undo !&quot;&quot;&quot;</pre></div>
<div class="cov"><span class="num"><pre>156</pre></span><pre>		targetNamespace = self.__class__( targetNamespace )</pre></div>
<div class="cov"><span class="num"><pre>157</pre></span><pre>		if autocreate and not targetNamespace.exists( ):</pre></div>
<div class="cov"><span class="num"><pre>158</pre></span><pre>			targetNamespace = Namespace.create( targetNamespace )</pre></div>
<div class="skip"><span class="num"><pre>159</pre></span><pre></pre></div>
<div class="cov"><span class="num"><pre>160</pre></span><pre>		cmds.namespace( mv=( self, targetNamespace ), force = force )</pre></div>
<div class="skip"><span class="num"><pre>161</pre></span><pre></pre></div>
<div class="cov"><span class="num"><pre>162</pre></span><pre>	def delete( self, move_to_namespace = rootpath, autocreate=True ):</pre></div>
<div class="cov"><span class="num"><pre>163</pre></span><pre>		&quot;&quot;&quot;Delete this namespace and move it's obejcts to the given move_to_namespace</pre></div>
<div class="skip"><span class="num"><pre>164</pre></span><pre>		</pre></div>
<div class="cov"><span class="num"><pre>165</pre></span><pre>		:param move_to_namespace: if None, the namespace to be deleted must be empty</pre></div>
<div class="cov"><span class="num"><pre>166</pre></span><pre>			If Namespace, objects in this namespace will be moved there prior to namespace deletion</pre></div>
<div class="cov"><span class="num"><pre>167</pre></span><pre>			move_to_namespace must exist</pre></div>
<div class="cov"><span class="num"><pre>168</pre></span><pre>		:param autocreate: if True, move_to_namespace will be created if it does not exist yet</pre></div>
<div class="cov"><span class="num"><pre>169</pre></span><pre>		:note: can handle sub-namespaces properly</pre></div>
<div class="cov"><span class="num"><pre>170</pre></span><pre>		:raise RuntimeError:</pre></div>
<div class="cov"><span class="num"><pre>171</pre></span><pre>		:todo: Implement undo !&quot;&quot;&quot;</pre></div>
<div class="cov"><span class="num"><pre>172</pre></span><pre>		if self == self.rootpath:</pre></div>
<div class="cov"><span class="num"><pre>173</pre></span><pre>			raise ValueError( &quot;Cannot delete root namespace&quot; )</pre></div>
<div class="skip"><span class="num"><pre>174</pre></span><pre></pre></div>
<div class="cov"><span class="num"><pre>175</pre></span><pre>		if not self.exists():					# its already gone - all fine</pre></div>
<div class="cov"><span class="num"><pre>176</pre></span><pre>			return</pre></div>
<div class="skip"><span class="num"><pre>177</pre></span><pre></pre></div>
<div class="skip"><span class="num"><pre>178</pre></span><pre>		# assure we have a namespace type</pre></div>
<div class="cov"><span class="num"><pre>179</pre></span><pre>		if move_to_namespace:</pre></div>
<div class="cov"><span class="num"><pre>180</pre></span><pre>			move_to_namespace = self.__class__( move_to_namespace )</pre></div>
<div class="skip"><span class="num"><pre>181</pre></span><pre></pre></div>
<div class="skip"><span class="num"><pre>182</pre></span><pre>		# assure we do not loose the current namespace - the maya methods could easily fail</pre></div>
<div class="cov"><span class="num"><pre>183</pre></span><pre>		previousns = Namespace.current( )</pre></div>
<div class="cov"><span class="num"><pre>184</pre></span><pre>		cleanup = CallOnDeletion( None )</pre></div>
<div class="cov"><span class="num"><pre>185</pre></span><pre>		if previousns != self:		# cannot reset future deleted namespace</pre></div>
<div class="cov"><span class="num"><pre>186</pre></span><pre>			cleanup.callableobj = lambda : previousns.setCurrent()</pre></div>
<div class="skip"><span class="num"><pre>187</pre></span><pre></pre></div>
<div class="skip"><span class="num"><pre>188</pre></span><pre></pre></div>
<div class="skip"><span class="num"><pre>189</pre></span><pre>		# recurse into children for deletion</pre></div>
<div class="cov"><span class="num"><pre>190</pre></span><pre>		for childns in self.children( ):</pre></div>
<div class="cov"><span class="num"><pre>191</pre></span><pre>			childns.delete( move_to_namespace = move_to_namespace )</pre></div>
<div class="skip"><span class="num"><pre>192</pre></span><pre></pre></div>
<div class="skip"><span class="num"><pre>193</pre></span><pre>		# make ourselves current</pre></div>
<div class="cov"><span class="num"><pre>194</pre></span><pre>		self.setCurrent( )</pre></div>
<div class="skip"><span class="num"><pre>195</pre></span><pre></pre></div>
<div class="cov"><span class="num"><pre>196</pre></span><pre>		if move_to_namespace:</pre></div>
<div class="cov"><span class="num"><pre>197</pre></span><pre>			self.moveNodes( move_to_namespace, autocreate=autocreate )</pre></div>
<div class="skip"><span class="num"><pre>198</pre></span><pre></pre></div>
<div class="skip"><span class="num"><pre>199</pre></span><pre>		# finally delete the namespace</pre></div>
<div class="cov"><span class="num"><pre>200</pre></span><pre>		cmds.namespace( rm=self )</pre></div>
<div class="skip"><span class="num"><pre>201</pre></span><pre></pre></div>
<div class="skip"><span class="num"><pre>202</pre></span><pre>	# need to fully qualify it as undo is initialized after us ...</pre></div>
<div class="cov"><span class="num"><pre>203</pre></span><pre>	@undo.undoable</pre></div>
<div class="cov"><span class="num"><pre>204</pre></span><pre>	def setCurrent( self ):</pre></div>
<div class="cov"><span class="num"><pre>205</pre></span><pre>		&quot;&quot;&quot;Set this namespace to be the current one - new objects will be put in it</pre></div>
<div class="cov"><span class="num"><pre>206</pre></span><pre>		by default</pre></div>
<div class="skip"><span class="num"><pre>207</pre></span><pre>		</pre></div>
<div class="cov"><span class="num"><pre>208</pre></span><pre>		:return: self&quot;&quot;&quot;</pre></div>
<div class="skip"><span class="num"><pre>209</pre></span><pre>		# THIS IS FASTER !</pre></div>
<div class="cov"><span class="num"><pre>210</pre></span><pre>		melop = undo.GenericOperation( )</pre></div>
<div class="cov"><span class="num"><pre>211</pre></span><pre>		melop.setDoitCmd( cmds.namespace, set = self )</pre></div>
<div class="cov"><span class="num"><pre>212</pre></span><pre>		melop.setUndoitCmd( cmds.namespace, set = Namespace.current() )</pre></div>
<div class="cov"><span class="num"><pre>213</pre></span><pre>		melop.doIt()</pre></div>
<div class="skip"><span class="num"><pre>214</pre></span><pre>		</pre></div>
<div class="cov"><span class="num"><pre>215</pre></span><pre>		return self</pre></div>
<div class="skip"><span class="num"><pre>216</pre></span><pre></pre></div>
<div class="skip"><span class="num"><pre>217</pre></span><pre>	#} END edit methods</pre></div>
<div class="skip"><span class="num"><pre>218</pre></span><pre></pre></div>
<div class="cov"><span class="num"><pre>219</pre></span><pre>	def parent( self ):</pre></div>
<div class="cov"><span class="num"><pre>220</pre></span><pre>		&quot;&quot;&quot;:return: parent namespace of this instance&quot;&quot;&quot;</pre></div>
<div class="cov"><span class="num"><pre>221</pre></span><pre>		if self == self.rootpath:</pre></div>
<div class="cov"><span class="num"><pre>222</pre></span><pre>			return None</pre></div>
<div class="skip"><span class="num"><pre>223</pre></span><pre></pre></div>
<div class="cov"><span class="num"><pre>224</pre></span><pre>		parent = iDagItem.parent( self )	# considers children like &quot;:bar&quot; being a root</pre></div>
<div class="cov"><span class="num"><pre>225</pre></span><pre>		if parent == None:	# we are just child of the root namespcae</pre></div>
<div class="cov"><span class="num"><pre>226</pre></span><pre>			parent = self.rootpath</pre></div>
<div class="cov"><span class="num"><pre>227</pre></span><pre>		return self.__class__( parent )</pre></div>
<div class="skip"><span class="num"><pre>228</pre></span><pre></pre></div>
<div class="cov"><span class="num"><pre>229</pre></span><pre>	def children( self, predicate = lambda x: True ):</pre></div>
<div class="cov"><span class="num"><pre>230</pre></span><pre>		&quot;&quot;&quot;:return: list of child namespaces</pre></div>
<div class="cov"><span class="num"><pre>231</pre></span><pre>		:param predicate: return True to include x in result&quot;&quot;&quot;</pre></div>
<div class="cov"><span class="num"><pre>232</pre></span><pre>		lastcurrent = self.current()</pre></div>
<div class="cov"><span class="num"><pre>233</pre></span><pre>		self.setCurrent( )</pre></div>
<div class="cov"><span class="num"><pre>234</pre></span><pre>		out = []</pre></div>
<div class="cov"><span class="num"><pre>235</pre></span><pre>		for ns in noneToList( cmds.namespaceInfo( lon=1 ) ):		# returns root-relative names !</pre></div>
<div class="cov"><span class="num"><pre>236</pre></span><pre>			if ns in self._defaultns or not predicate( ns ):</pre></div>
<div class="cov"><span class="num"><pre>237</pre></span><pre>				continue</pre></div>
<div class="cov"><span class="num"><pre>238</pre></span><pre>			out.append( self.__class__( ns ) )</pre></div>
<div class="skip"><span class="num"><pre>239</pre></span><pre>		# END for each subspace</pre></div>
<div class="cov"><span class="num"><pre>240</pre></span><pre>		lastcurrent.setCurrent( )</pre></div>
<div class="skip"><span class="num"><pre>241</pre></span><pre></pre></div>
<div class="cov"><span class="num"><pre>242</pre></span><pre>		return out</pre></div>
<div class="skip"><span class="num"><pre>243</pre></span><pre></pre></div>
<div class="skip"><span class="num"><pre>244</pre></span><pre>	#{Query Methods</pre></div>
<div class="skip"><span class="num"><pre>245</pre></span><pre></pre></div>
<div class="cov"><span class="num"><pre>246</pre></span><pre>	@classmethod</pre></div>
<div class="cov"><span class="num"><pre>247</pre></span><pre>	def current( cls ):</pre></div>
<div class="cov"><span class="num"><pre>248</pre></span><pre>		&quot;&quot;&quot;:return: the currently set absolute namespace &quot;&quot;&quot;</pre></div>
<div class="skip"><span class="num"><pre>249</pre></span><pre>		# will return namespace relative to the root - thus is absolute in some sense</pre></div>
<div class="cov"><span class="num"><pre>250</pre></span><pre>		nsname = cmds.namespaceInfo( cur = 1 )</pre></div>
<div class="cov"><span class="num"><pre>251</pre></span><pre>		if not nsname.startswith( ':' ):		# assure we return an absoslute namespace</pre></div>
<div class="cov"><span class="num"><pre>252</pre></span><pre>			nsname = &quot;:&quot; + nsname</pre></div>
<div class="cov"><span class="num"><pre>253</pre></span><pre>		return cls( nsname )</pre></div>
<div class="skip"><span class="num"><pre>254</pre></span><pre></pre></div>
<div class="cov"><span class="num"><pre>255</pre></span><pre>	@classmethod</pre></div>
<div class="cov"><span class="num"><pre>256</pre></span><pre>	def findUnique( cls, basename, incrementFunc = defaultIncrFunc ):</pre></div>
<div class="cov"><span class="num"><pre>257</pre></span><pre>		&quot;&quot;&quot;Find a unique namespace based on basename which does not yet exist</pre></div>
<div class="cov"><span class="num"><pre>258</pre></span><pre>		in the scene and can be created.</pre></div>
<div class="skip"><span class="num"><pre>259</pre></span><pre>		</pre></div>
<div class="cov"><span class="num"><pre>260</pre></span><pre>		:param basename: basename of the namespace, like &quot;:mynamespace&quot; or &quot;mynamespace:subspace&quot;</pre></div>
<div class="cov"><span class="num"><pre>261</pre></span><pre>		:param incrementFunc: func( basename, index ), returns a unique name generated</pre></div>
<div class="cov"><span class="num"><pre>262</pre></span><pre>			from the basename and the index representing the current iteration</pre></div>
<div class="cov"><span class="num"><pre>263</pre></span><pre>		:return: unique namespace that is guaranteed not to exist below the current</pre></div>
<div class="cov"><span class="num"><pre>264</pre></span><pre>			namespace&quot;&quot;&quot;</pre></div>
<div class="cov"><span class="num"><pre>265</pre></span><pre>		i = 0</pre></div>
<div class="cov"><span class="num"><pre>266</pre></span><pre>		while True:</pre></div>
<div class="cov"><span class="num"><pre>267</pre></span><pre>			testns = cls( incrementFunc( basename, i ) )</pre></div>
<div class="cov"><span class="num"><pre>268</pre></span><pre>			i += 1</pre></div>
<div class="skip"><span class="num"><pre>269</pre></span><pre></pre></div>
<div class="cov"><span class="num"><pre>270</pre></span><pre>			if not testns.exists():</pre></div>
<div class="cov"><span class="num"><pre>271</pre></span><pre>				return testns</pre></div>
<div class="skip"><span class="num"><pre>272</pre></span><pre>		# END while loop</pre></div>
<div class="nocov"><span class="num"><pre>273</pre></span><pre>		raise AssertionError(&quot;Should never get here&quot;)</pre></div>
<div class="skip"><span class="num"><pre>274</pre></span><pre></pre></div>
<div class="cov"><span class="num"><pre>275</pre></span><pre>	def exists( self ):</pre></div>
<div class="cov"><span class="num"><pre>276</pre></span><pre>		&quot;&quot;&quot;:return: True if this namespace exists&quot;&quot;&quot;</pre></div>
<div class="cov"><span class="num"><pre>277</pre></span><pre>		return cmds.namespace( ex=self )</pre></div>
<div class="skip"><span class="num"><pre>278</pre></span><pre></pre></div>
<div class="cov"><span class="num"><pre>279</pre></span><pre>	def isAbsolute( self ):</pre></div>
<div class="cov"><span class="num"><pre>280</pre></span><pre>		&quot;&quot;&quot;</pre></div>
<div class="cov"><span class="num"><pre>281</pre></span><pre>		:return: True if this namespace is an absolut one, defining a namespace</pre></div>
<div class="cov"><span class="num"><pre>282</pre></span><pre>			from the root namespace like &quot;:foo:bar&quot;&quot;&quot;</pre></div>
<div class="cov"><span class="num"><pre>283</pre></span><pre>		return self.startswith( self._sep )</pre></div>
<div class="skip"><span class="num"><pre>284</pre></span><pre></pre></div>
<div class="cov"><span class="num"><pre>285</pre></span><pre>	def toRelative( self ):</pre></div>
<div class="cov"><span class="num"><pre>286</pre></span><pre>		&quot;&quot;&quot;:return: a relative version of self, thus it does not start with a colon</pre></div>
<div class="cov"><span class="num"><pre>287</pre></span><pre>		:note: the root namespace cannot be relative - if this is of interest for you,</pre></div>
<div class="cov"><span class="num"><pre>288</pre></span><pre>			you have to check for it. This method gracefully ignores that fact to make</pre></div>
<div class="cov"><span class="num"><pre>289</pre></span><pre>			it more convenient to use as one does not have to be afraid of exceptions&quot;&quot;&quot;</pre></div>
<div class="cov"><span class="num"><pre>290</pre></span><pre>		if not self.startswith( &quot;:&quot; ):</pre></div>
<div class="nocov"><span class="num"><pre>291</pre></span><pre>			return self.__class__( self )	# create a copy</pre></div>
<div class="skip"><span class="num"><pre>292</pre></span><pre></pre></div>
<div class="cov"><span class="num"><pre>293</pre></span><pre>		return self.__class__( self[1:], absolute=False )</pre></div>
<div class="skip"><span class="num"><pre>294</pre></span><pre></pre></div>
<div class="cov"><span class="num"><pre>295</pre></span><pre>	def relativeTo( self, basenamespace ):</pre></div>
<div class="cov"><span class="num"><pre>296</pre></span><pre>		&quot;&quot;&quot;returns this namespace relative to the given basenamespace</pre></div>
<div class="skip"><span class="num"><pre>297</pre></span><pre>		</pre></div>
<div class="cov"><span class="num"><pre>298</pre></span><pre>		:param basenamespace: the namespace to which the returned one should be</pre></div>
<div class="cov"><span class="num"><pre>299</pre></span><pre>			relative too</pre></div>
<div class="cov"><span class="num"><pre>300</pre></span><pre>		:raise ValueError: If this or basenamespace is not absolute or if no relative</pre></div>
<div class="cov"><span class="num"><pre>301</pre></span><pre>			namespace exists</pre></div>
<div class="cov"><span class="num"><pre>302</pre></span><pre>		:return: relative namespace&quot;&quot;&quot;</pre></div>
<div class="cov"><span class="num"><pre>303</pre></span><pre>		if not self.isAbsolute() or not basenamespace.isAbsolute( ):</pre></div>
<div class="nocov"><span class="num"><pre>304</pre></span><pre>			raise ValueError( &quot;All involved namespaces need to be absolute: &quot; + self + &quot; , &quot; + basenamespace )</pre></div>
<div class="skip"><span class="num"><pre>305</pre></span><pre></pre></div>
<div class="cov"><span class="num"><pre>306</pre></span><pre>		suffix = self._sep</pre></div>
<div class="cov"><span class="num"><pre>307</pre></span><pre>		if basenamespace.endswith( self._sep ):</pre></div>
<div class="cov"><span class="num"><pre>308</pre></span><pre>			suffix = ''</pre></div>
<div class="cov"><span class="num"><pre>309</pre></span><pre>		relnamespace = self.replace( str( basenamespace ) + suffix, '' )</pre></div>
<div class="cov"><span class="num"><pre>310</pre></span><pre>		if relnamespace == self:</pre></div>
<div class="nocov"><span class="num"><pre>311</pre></span><pre>			raise ValueError( str( basenamespace ) + &quot; is no base of &quot; + str( self ) )</pre></div>
<div class="skip"><span class="num"><pre>312</pre></span><pre></pre></div>
<div class="cov"><span class="num"><pre>313</pre></span><pre>		return self.__class__( relnamespace, absolute = False )</pre></div>
<div class="skip"><span class="num"><pre>314</pre></span><pre></pre></div>
<div class="cov"><span class="num"><pre>315</pre></span><pre>	@classmethod</pre></div>
<div class="cov"><span class="num"><pre>316</pre></span><pre>	def splitNamespace( cls, objectname ):</pre></div>
<div class="cov"><span class="num"><pre>317</pre></span><pre>		&quot;&quot;&quot;Cut the namespace from the given  name and return a tuple( namespacename, objectname )</pre></div>
<div class="skip"><span class="num"><pre>318</pre></span><pre>		</pre></div>
<div class="cov"><span class="num"><pre>319</pre></span><pre>		:note: method assumes that the namespace starts at the beginning of the object&quot;&quot;&quot;</pre></div>
<div class="cov"><span class="num"><pre>320</pre></span><pre>		if objectname.find( '|' ) &gt; -1:</pre></div>
<div class="nocov"><span class="num"><pre>321</pre></span><pre>			raise AssertionError( &quot;Dagpath given where object name is required&quot; )</pre></div>
<div class="skip"><span class="num"><pre>322</pre></span><pre></pre></div>
<div class="cov"><span class="num"><pre>323</pre></span><pre>		rpos = objectname.rfind( Namespace._sep )</pre></div>
<div class="cov"><span class="num"><pre>324</pre></span><pre>		if rpos == -1:</pre></div>
<div class="cov"><span class="num"><pre>325</pre></span><pre>			return ( Namespace.rootpath, objectname )</pre></div>
<div class="skip"><span class="num"><pre>326</pre></span><pre></pre></div>
<div class="cov"><span class="num"><pre>327</pre></span><pre>		return ( cls( objectname[:rpos] ), objectname[rpos+1:] )</pre></div>
<div class="skip"><span class="num"><pre>328</pre></span><pre></pre></div>
<div class="skip"><span class="num"><pre>329</pre></span><pre></pre></div>
<div class="cov"><span class="num"><pre>330</pre></span><pre>	def _removeDuplicateSep( self, name ):</pre></div>
<div class="cov"><span class="num"><pre>331</pre></span><pre>		&quot;&quot;&quot;:return: name with duplicated : removed&quot;&quot;&quot;</pre></div>
<div class="cov"><span class="num"><pre>332</pre></span><pre>		return self.re_find_duplicate_sep.sub( self._sep, name )</pre></div>
<div class="skip"><span class="num"><pre>333</pre></span><pre></pre></div>
<div class="cov"><span class="num"><pre>334</pre></span><pre>	def substitute( self, find_in, replacement ):</pre></div>
<div class="cov"><span class="num"><pre>335</pre></span><pre>		&quot;&quot;&quot;</pre></div>
<div class="cov"><span class="num"><pre>336</pre></span><pre>		:return: string with our namespace properly substituted with replacement such</pre></div>
<div class="cov"><span class="num"><pre>337</pre></span><pre>			that the result is a properly formatted object name ( with or without namespace</pre></div>
<div class="cov"><span class="num"><pre>338</pre></span><pre>			depending of the value of replacement )</pre></div>
<div class="cov"><span class="num"><pre>339</pre></span><pre>			As this method is based on string replacement, self might as well match sub-namespaces</pre></div>
<div class="cov"><span class="num"><pre>340</pre></span><pre>			if it is relative</pre></div>
<div class="cov"><span class="num"><pre>341</pre></span><pre>		:note: if replacement is an empty string, it will effectively cut the matched namespace</pre></div>
<div class="cov"><span class="num"><pre>342</pre></span><pre>			off the object name</pre></div>
<div class="cov"><span class="num"><pre>343</pre></span><pre>		:note: handles replacement of subnamespaces correctly as well</pre></div>
<div class="cov"><span class="num"><pre>344</pre></span><pre>		:note: as it operates on strings, the actual namespaces do not need to exist&quot;&quot;&quot;</pre></div>
<div class="skip"><span class="num"><pre>345</pre></span><pre>		# special case : we are root</pre></div>
<div class="cov"><span class="num"><pre>346</pre></span><pre>		if self == Namespace.rootpath:</pre></div>
<div class="cov"><span class="num"><pre>347</pre></span><pre>			return self._removeDuplicateSep( self.__class__( replacement, absolute=False ) + find_in )</pre></div>
<div class="skip"><span class="num"><pre>348</pre></span><pre></pre></div>
<div class="skip"><span class="num"><pre>349</pre></span><pre>		# do the replacement</pre></div>
<div class="cov"><span class="num"><pre>350</pre></span><pre>		return self._removeDuplicateSep( find_in.replace( self, replacement ) )</pre></div>
<div class="skip"><span class="num"><pre>351</pre></span><pre></pre></div>
<div class="cov"><span class="num"><pre>352</pre></span><pre>	@classmethod</pre></div>
<div class="cov"><span class="num"><pre>353</pre></span><pre>	def substituteNamespace( cls, thisns, find_in, replacement ):</pre></div>
<div class="cov"><span class="num"><pre>354</pre></span><pre>		&quot;&quot;&quot;Same as `substitute`, but signature might feel more natural&quot;&quot;&quot;</pre></div>
<div class="nocov"><span class="num"><pre>355</pre></span><pre>		return thisns.substitute( find_in, replacement )</pre></div>
<div class="skip"><span class="num"><pre>356</pre></span><pre></pre></div>
<div class="skip"><span class="num"><pre>357</pre></span><pre>	#} END query methods</pre></div>
<div class="skip"><span class="num"><pre>358</pre></span><pre></pre></div>
<div class="skip"><span class="num"><pre>359</pre></span><pre></pre></div>
<div class="skip"><span class="num"><pre>360</pre></span><pre>	#{ Object Retrieval</pre></div>
<div class="skip"><span class="num"><pre>361</pre></span><pre></pre></div>
<div class="cov"><span class="num"><pre>362</pre></span><pre>	def iterNodes( self, *args, **kwargs ):</pre></div>
<div class="cov"><span class="num"><pre>363</pre></span><pre>		&quot;&quot;&quot;Return an iterator on all objects in the namespace</pre></div>
<div class="skip"><span class="num"><pre>364</pre></span><pre>		</pre></div>
<div class="cov"><span class="num"><pre>365</pre></span><pre>		:param args: MFn.kType filter types to be used to pre-filter the nodes </pre></div>
<div class="cov"><span class="num"><pre>366</pre></span><pre>			in the namespace. This can greatly improve performance !</pre></div>
<div class="cov"><span class="num"><pre>367</pre></span><pre>		:param kwargs: given to `iterDagNodes` or `iterDgNodes`, which includes the </pre></div>
<div class="cov"><span class="num"><pre>368</pre></span><pre>			option to provide a predicate function. Additionally, the following ones </pre></div>
<div class="cov"><span class="num"><pre>369</pre></span><pre>			may be defined:</pre></div>
<div class="skip"><span class="num"><pre>370</pre></span><pre>			</pre></div>
<div class="cov"><span class="num"><pre>371</pre></span><pre>			 * asNode: </pre></div>
<div class="cov"><span class="num"><pre>372</pre></span><pre>			 	if true, default True, Nodes will be yielded. If False, </pre></div>
<div class="cov"><span class="num"><pre>373</pre></span><pre>			 	you will receive MDagPaths or MObjects depending on the 'dag' kwarg</pre></div>
<div class="skip"><span class="num"><pre>374</pre></span><pre>			 	</pre></div>
<div class="cov"><span class="num"><pre>375</pre></span><pre>			 * dag: </pre></div>
<div class="cov"><span class="num"><pre>376</pre></span><pre>			 	if True, default False, only dag nodes will be returned, otherwise you will </pre></div>
<div class="cov"><span class="num"><pre>377</pre></span><pre>				receive dag nodes and dg nodes. Instance information will be lost on the way</pre></div>
<div class="cov"><span class="num"><pre>378</pre></span><pre>				though.</pre></div>
<div class="skip"><span class="num"><pre>379</pre></span><pre>				</pre></div>
<div class="cov"><span class="num"><pre>380</pre></span><pre>			 * depth: </pre></div>
<div class="cov"><span class="num"><pre>381</pre></span><pre>			 	if 0, default 0, only objects in this namespace will be returned</pre></div>
<div class="skip"><span class="num"><pre>382</pre></span><pre>		</pre></div>
<div class="cov"><span class="num"><pre>383</pre></span><pre>				if -1, all subnamespaces will be included as well, the depth is unlimited</pre></div>
<div class="skip"><span class="num"><pre>384</pre></span><pre>				</pre></div>
<div class="cov"><span class="num"><pre>385</pre></span><pre>				if 0&lt;depth&lt;x include all objects up to the 'depth' subnamespace</pre></div>
<div class="cov"><span class="num"><pre>386</pre></span><pre>		:note: this method is quite similar to `FileReference.iterNodes`, but </pre></div>
<div class="cov"><span class="num"><pre>387</pre></span><pre>			has a different feature set and needs this code here for maximum performance&quot;&quot;&quot;</pre></div>
<div class="cov"><span class="num"><pre>388</pre></span><pre>		import nt</pre></div>
<div class="cov"><span class="num"><pre>389</pre></span><pre>		dag = kwargs.pop('dag', False)</pre></div>
<div class="cov"><span class="num"><pre>390</pre></span><pre>		asNode = kwargs.get('asNode', True)</pre></div>
<div class="cov"><span class="num"><pre>391</pre></span><pre>		predicate = kwargs.pop('predicate', lambda n: True)</pre></div>
<div class="cov"><span class="num"><pre>392</pre></span><pre>		depth = kwargs.pop('depth', 0)</pre></div>
<div class="skip"><span class="num"><pre>393</pre></span><pre>		</pre></div>
<div class="skip"><span class="num"><pre>394</pre></span><pre>		# we handle node conversion</pre></div>
<div class="cov"><span class="num"><pre>395</pre></span><pre>		kwargs['asNode'] = False</pre></div>
<div class="cov"><span class="num"><pre>396</pre></span><pre>		pred = None</pre></div>
<div class="cov"><span class="num"><pre>397</pre></span><pre>		iter_type = None</pre></div>
<div class="cov"><span class="num"><pre>398</pre></span><pre>		nsGetRelativeTo = type(self).relativeTo</pre></div>
<div class="cov"><span class="num"><pre>399</pre></span><pre>		selfrela = self.toRelative()+':'</pre></div>
<div class="cov"><span class="num"><pre>400</pre></span><pre>		if dag:</pre></div>
<div class="nocov"><span class="num"><pre>401</pre></span><pre>			mfndag = api.MFnDagNode()</pre></div>
<div class="nocov"><span class="num"><pre>402</pre></span><pre>			mfndagSetObject = mfndag.setObject</pre></div>
<div class="nocov"><span class="num"><pre>403</pre></span><pre>			mfndagParentNamespace = mfndag.parentNamespace</pre></div>
<div class="skip"><span class="num"><pre>404</pre></span><pre>			</pre></div>
<div class="nocov"><span class="num"><pre>405</pre></span><pre>			def check_filter(n):</pre></div>
<div class="nocov"><span class="num"><pre>406</pre></span><pre>				mfndagSetObject(n)</pre></div>
<div class="nocov"><span class="num"><pre>407</pre></span><pre>				ns = mfndagParentNamespace()</pre></div>
<div class="nocov"><span class="num"><pre>408</pre></span><pre>				if not _isRootOf(selfrela, ns):</pre></div>
<div class="nocov"><span class="num"><pre>409</pre></span><pre>					return False</pre></div>
<div class="skip"><span class="num"><pre>410</pre></span><pre>				</pre></div>
<div class="skip"><span class="num"><pre>411</pre></span><pre>				# check depth</pre></div>
<div class="nocov"><span class="num"><pre>412</pre></span><pre>				if depth &gt; -1:</pre></div>
<div class="nocov"><span class="num"><pre>413</pre></span><pre>					ns = Namespace(ns)</pre></div>
<div class="nocov"><span class="num"><pre>414</pre></span><pre>					if self == ns:		# its depth 0</pre></div>
<div class="nocov"><span class="num"><pre>415</pre></span><pre>						return True</pre></div>
<div class="skip"><span class="num"><pre>416</pre></span><pre>					</pre></div>
<div class="skip"><span class="num"><pre>417</pre></span><pre>					# one separator means two subpaths</pre></div>
<div class="nocov"><span class="num"><pre>418</pre></span><pre>					if nsGetRelativeTo(ns, self).count(':')+1 &gt; depth:</pre></div>
<div class="nocov"><span class="num"><pre>419</pre></span><pre>						return False</pre></div>
<div class="skip"><span class="num"><pre>420</pre></span><pre>				# END handle depth</pre></div>
<div class="nocov"><span class="num"><pre>421</pre></span><pre>				return True</pre></div>
<div class="skip"><span class="num"><pre>422</pre></span><pre>			# END filter</pre></div>
<div class="skip"><span class="num"><pre>423</pre></span><pre>			</pre></div>
<div class="nocov"><span class="num"><pre>424</pre></span><pre>			iter_type = nt.it.iterDagNodes</pre></div>
<div class="nocov"><span class="num"><pre>425</pre></span><pre>			pred = check_filter</pre></div>
<div class="cov"><span class="num"><pre>426</pre></span><pre>		else:</pre></div>
<div class="cov"><span class="num"><pre>427</pre></span><pre>			iter_type = nt.it.iterDgNodes</pre></div>
<div class="cov"><span class="num"><pre>428</pre></span><pre>			mfndep = api.MFnDependencyNode()</pre></div>
<div class="cov"><span class="num"><pre>429</pre></span><pre>			mfndepSetObject = mfndep.setObject</pre></div>
<div class="cov"><span class="num"><pre>430</pre></span><pre>			mfndepParentNamespace = mfndep.parentNamespace</pre></div>
<div class="skip"><span class="num"><pre>431</pre></span><pre>			</pre></div>
<div class="cov"><span class="num"><pre>432</pre></span><pre>			def check_filter(n):</pre></div>
<div class="cov"><span class="num"><pre>433</pre></span><pre>				mfndepSetObject(n)</pre></div>
<div class="cov"><span class="num"><pre>434</pre></span><pre>				ns = mfndepParentNamespace()</pre></div>
<div class="cov"><span class="num"><pre>435</pre></span><pre>				if not _isRootOf(selfrela, ns):</pre></div>
<div class="cov"><span class="num"><pre>436</pre></span><pre>					return False</pre></div>
<div class="skip"><span class="num"><pre>437</pre></span><pre>				# END first namespace check</pre></div>
<div class="skip"><span class="num"><pre>438</pre></span><pre>				</pre></div>
<div class="skip"><span class="num"><pre>439</pre></span><pre>				# duplicated to be as fast as possible</pre></div>
<div class="skip"><span class="num"><pre>440</pre></span><pre>				# check depth</pre></div>
<div class="cov"><span class="num"><pre>441</pre></span><pre>				if depth &gt; -1:</pre></div>
<div class="cov"><span class="num"><pre>442</pre></span><pre>					ns = Namespace(ns)</pre></div>
<div class="cov"><span class="num"><pre>443</pre></span><pre>					if self == ns:		# its depth 0</pre></div>
<div class="cov"><span class="num"><pre>444</pre></span><pre>						return True</pre></div>
<div class="skip"><span class="num"><pre>445</pre></span><pre>					</pre></div>
<div class="cov"><span class="num"><pre>446</pre></span><pre>					if nsGetRelativeTo(ns, self).count(':')+1 &gt; depth:</pre></div>
<div class="cov"><span class="num"><pre>447</pre></span><pre>						return False</pre></div>
<div class="skip"><span class="num"><pre>448</pre></span><pre>				# END handle depth</pre></div>
<div class="cov"><span class="num"><pre>449</pre></span><pre>				return True</pre></div>
<div class="skip"><span class="num"><pre>450</pre></span><pre>			# END filter</pre></div>
<div class="cov"><span class="num"><pre>451</pre></span><pre>			iter_type = nt.it.iterDgNodes</pre></div>
<div class="cov"><span class="num"><pre>452</pre></span><pre>			pred = check_filter</pre></div>
<div class="skip"><span class="num"><pre>453</pre></span><pre>		# END dag handling</pre></div>
<div class="skip"><span class="num"><pre>454</pre></span><pre>		</pre></div>
<div class="skip"><span class="num"><pre>455</pre></span><pre></pre></div>
<div class="cov"><span class="num"><pre>456</pre></span><pre>		kwargs['predicate'] = pred</pre></div>
<div class="cov"><span class="num"><pre>457</pre></span><pre>		NodeFromObj = nt.NodeFromObj</pre></div>
<div class="cov"><span class="num"><pre>458</pre></span><pre>		for n in iter_type(*args, **kwargs):</pre></div>
<div class="cov"><span class="num"><pre>459</pre></span><pre>			if asNode:</pre></div>
<div class="cov"><span class="num"><pre>460</pre></span><pre>				n = NodeFromObj(n)</pre></div>
<div class="cov"><span class="num"><pre>461</pre></span><pre>			if predicate(n):</pre></div>
<div class="cov"><span class="num"><pre>462</pre></span><pre>				yield n</pre></div>
<div class="skip"><span class="num"><pre>463</pre></span><pre>		# END for each object to yield</pre></div>
<div class="skip"><span class="num"><pre>464</pre></span><pre>	#} END object retrieval</pre></div>
<div class="skip"><span class="num"><pre>465</pre></span><pre>	</pre></div>
<div class="skip"><span class="num"><pre>466</pre></span><pre></pre></div>
<div class="skip"><span class="num"><pre>467</pre></span><pre>#{ Static Access</pre></div>
<div class="cov"><span class="num"><pre>468</pre></span><pre>def createNamespace( *args ):</pre></div>
<div class="cov"><span class="num"><pre>469</pre></span><pre>	&quot;&quot;&quot;see `Namespace.create`&quot;&quot;&quot;</pre></div>
<div class="cov"><span class="num"><pre>470</pre></span><pre>	return Namespace.create( *args )</pre></div>
<div class="skip"><span class="num"><pre>471</pre></span><pre></pre></div>
<div class="cov"><span class="num"><pre>472</pre></span><pre>def currentNamespace( ):</pre></div>
<div class="cov"><span class="num"><pre>473</pre></span><pre>	&quot;&quot;&quot;see `Namespace.current`&quot;&quot;&quot;</pre></div>
<div class="nocov"><span class="num"><pre>474</pre></span><pre>	return Namespace.current()</pre></div>
<div class="skip"><span class="num"><pre>475</pre></span><pre></pre></div>
<div class="cov"><span class="num"><pre>476</pre></span><pre>def findUniqueNamespace( *args, **kwargs ):</pre></div>
<div class="cov"><span class="num"><pre>477</pre></span><pre>	&quot;&quot;&quot;see `Namespace.findUnique`&quot;&quot;&quot;</pre></div>
<div class="nocov"><span class="num"><pre>478</pre></span><pre>	return Namespace.findUnique( *args, **kwargs )</pre></div>
<div class="skip"><span class="num"><pre>479</pre></span><pre></pre></div>
<div class="cov"><span class="num"><pre>480</pre></span><pre>def existsNamespace( namespace ):</pre></div>
<div class="cov"><span class="num"><pre>481</pre></span><pre>	&quot;&quot;&quot;:return : True if given namespace ( name ) exists&quot;&quot;&quot;</pre></div>
<div class="cov"><span class="num"><pre>482</pre></span><pre>	return Namespace( namespace ).exists()</pre></div>
<div class="skip"><span class="num"><pre>483</pre></span><pre></pre></div>
<div class="skip"><span class="num"><pre>484</pre></span><pre></pre></div>
<div class="cov"><span class="num"><pre>485</pre></span><pre>RootNamespace = Namespace(Namespace.rootpath)</pre></div>
<div class="skip"><span class="num"><pre>486</pre></span><pre></pre></div>
<div class="skip"><span class="num"><pre>487</pre></span><pre>#} END Static Access</pre></div>
<div class="skip"><span class="num"><pre>488</pre></span><pre></pre></div>
<div class="skip"><span class="num"><pre>489</pre></span><pre></pre></div>
</div>
</body>
</html>
