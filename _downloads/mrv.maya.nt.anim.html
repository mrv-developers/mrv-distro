<html>
<head>
<title>mrv.maya.nt.anim</title>
</head>
<body>
mrv.maya.nt.anim
<style>
.coverage pre {float: left; margin: 0px 1em; border: none;
               padding: 0px; }
.num pre { margin: 0px }
.nocov, .nocov pre {background-color: #faa}
.cov, .cov pre {background-color: #cfc}
div.coverage div { clear: both; height: 1.1em}
</style>
<div class="stats">
Covered: 48 lines<br/>
Missed: 0 lines<br/>
Skipped 17 lines<br/>
Percent: 100 %<br/>

</div>
<div class="coverage">
<div class="skip"><span class="num"><pre> 1</pre></span><pre># -*- coding: utf-8 -*-</pre></div>
<div class="cov"><span class="num"><pre> 2</pre></span><pre>&quot;&quot;&quot; Contains implementations of animation specific types and utilities &quot;&quot;&quot;</pre></div>
<div class="cov"><span class="num"><pre> 3</pre></span><pre>__docformat__ = &quot;restructuredtext&quot;</pre></div>
<div class="skip"><span class="num"><pre> 4</pre></span><pre></pre></div>
<div class="cov"><span class="num"><pre> 5</pre></span><pre>import base</pre></div>
<div class="cov"><span class="num"><pre> 6</pre></span><pre>import maya.OpenMaya as api</pre></div>
<div class="cov"><span class="num"><pre> 7</pre></span><pre>import maya.OpenMayaAnim as apianim</pre></div>
<div class="cov"><span class="num"><pre> 8</pre></span><pre>import util</pre></div>
<div class="skip"><span class="num"><pre> 9</pre></span><pre></pre></div>
<div class="cov"><span class="num"><pre>10</pre></span><pre>__all__ = ( &quot;AnimCurve&quot;, )</pre></div>
<div class="skip"><span class="num"><pre>11</pre></span><pre></pre></div>
<div class="cov"><span class="num"><pre>12</pre></span><pre>class AnimCurve( base.DependNode ):</pre></div>
<div class="cov"><span class="num"><pre>13</pre></span><pre>	&quot;&quot;&quot;Type representing a maya animation cuvrve, fixes existing MFnAnimCurve</pre></div>
<div class="cov"><span class="num"><pre>14</pre></span><pre>	methods and provides new convenience methods as well&quot;&quot;&quot;</pre></div>
<div class="skip"><span class="num"><pre>15</pre></span><pre></pre></div>
<div class="cov"><span class="num"><pre>16</pre></span><pre>	@classmethod</pre></div>
<div class="cov"><span class="num"><pre>17</pre></span><pre>	def findAnimation( cls, iter_nodes, asNode=True ):</pre></div>
<div class="cov"><span class="num"><pre>18</pre></span><pre>		&quot;&quot;&quot;</pre></div>
<div class="cov"><span class="num"><pre>19</pre></span><pre>		:return: list-compatible object containing animation curves attached to</pre></div>
<div class="cov"><span class="num"><pre>20</pre></span><pre>			the nodes in the given object.</pre></div>
<div class="cov"><span class="num"><pre>21</pre></span><pre>		:param iter_nodes: MSelection list or list of MObjects or Nodes containing</pre></div>
<div class="cov"><span class="num"><pre>22</pre></span><pre>			whose animation you would like to retrieve.</pre></div>
<div class="cov"><span class="num"><pre>23</pre></span><pre>		:param asNode: If True, the animation curves will be wrapped, or </pre></div>
<div class="cov"><span class="num"><pre>24</pre></span><pre>			MObjects otherwise ( to gain performance )&quot;&quot;&quot;</pre></div>
<div class="cov"><span class="num"><pre>25</pre></span><pre>		selection_list = base.toSelectionList(iter_nodes)</pre></div>
<div class="cov"><span class="num"><pre>26</pre></span><pre>		anim_plugs = api.MPlugArray()</pre></div>
<div class="cov"><span class="num"><pre>27</pre></span><pre>		apianim.MAnimUtil.findAnimatedPlugs(selection_list, anim_plugs, False)</pre></div>
<div class="skip"><span class="num"><pre>28</pre></span><pre>		</pre></div>
<div class="skip"><span class="num"><pre>29</pre></span><pre>		# it will append to this array !</pre></div>
<div class="cov"><span class="num"><pre>30</pre></span><pre>		objs = api.MObjectArray()</pre></div>
<div class="cov"><span class="num"><pre>31</pre></span><pre>		for anim_plug in anim_plugs:</pre></div>
<div class="cov"><span class="num"><pre>32</pre></span><pre>			apianim.MAnimUtil.findAnimation(anim_plug, objs)</pre></div>
<div class="skip"><span class="num"><pre>33</pre></span><pre>		# END for each animated plug</pre></div>
<div class="skip"><span class="num"><pre>34</pre></span><pre>		</pre></div>
<div class="cov"><span class="num"><pre>35</pre></span><pre>		if asNode:</pre></div>
<div class="cov"><span class="num"><pre>36</pre></span><pre>			return map(base.NodeFromObj, objs)</pre></div>
<div class="cov"><span class="num"><pre>37</pre></span><pre>		else:</pre></div>
<div class="cov"><span class="num"><pre>38</pre></span><pre>			return objs</pre></div>
<div class="skip"><span class="num"><pre>39</pre></span><pre>		# END handle return type</pre></div>
<div class="skip"><span class="num"><pre>40</pre></span><pre></pre></div>
<div class="cov"><span class="num"><pre>41</pre></span><pre>	def getTangent( self, index, isInTangent ):</pre></div>
<div class="cov"><span class="num"><pre>42</pre></span><pre>		&quot;&quot;&quot;</pre></div>
<div class="cov"><span class="num"><pre>43</pre></span><pre>		:return: tuple(x,y) tuple containing the x and y positions of the </pre></div>
<div class="cov"><span class="num"><pre>44</pre></span><pre>			tangent at index:</pre></div>
<div class="skip"><span class="num"><pre>45</pre></span><pre>			</pre></div>
<div class="cov"><span class="num"><pre>46</pre></span><pre>			 * x is the x value of the slope of the tangent in seconds</pre></div>
<div class="cov"><span class="num"><pre>47</pre></span><pre>			 * y is the absolute y value of the slope of the tangent</pre></div>
<div class="skip"><span class="num"><pre>48</pre></span><pre>			 </pre></div>
<div class="cov"><span class="num"><pre>49</pre></span><pre>		:param index: Index of the key for which the tangent x,y value is required</pre></div>
<div class="cov"><span class="num"><pre>50</pre></span><pre>		:param isInTangent: If true, the in-tangent is returned, else, the out-tangent is returned&quot;&quot;&quot;</pre></div>
<div class="cov"><span class="num"><pre>51</pre></span><pre>		return util.in_two_floats_out_tuple(lambda x, y: self._api_getTangent(index, x, y, isInTangent))</pre></div>
<div class="skip"><span class="num"><pre>52</pre></span><pre>		</pre></div>
<div class="cov"><span class="num"><pre>53</pre></span><pre>	def getTangentAsAngle(self, index, isInTangent):</pre></div>
<div class="cov"><span class="num"><pre>54</pre></span><pre>		&quot;&quot;&quot;</pre></div>
<div class="cov"><span class="num"><pre>55</pre></span><pre>		:return: tuple(MAngle, weight) tuple containing the angle and weight of</pre></div>
<div class="cov"><span class="num"><pre>56</pre></span><pre>			the tangent. </pre></div>
<div class="cov"><span class="num"><pre>57</pre></span><pre>		:note: See `getTangent` for all other parameters&quot;&quot;&quot;</pre></div>
<div class="cov"><span class="num"><pre>58</pre></span><pre>		sud = api.MScriptUtil()</pre></div>
<div class="cov"><span class="num"><pre>59</pre></span><pre>		pd = sud.asDoublePtr()</pre></div>
<div class="cov"><span class="num"><pre>60</pre></span><pre>		a = api.MAngle()</pre></div>
<div class="skip"><span class="num"><pre>61</pre></span><pre>		</pre></div>
<div class="cov"><span class="num"><pre>62</pre></span><pre>		self._api_getTangent(index, a, pd, isInTangent)</pre></div>
<div class="cov"><span class="num"><pre>63</pre></span><pre>		return (a, sud.getDouble(pd))</pre></div>
<div class="skip"><span class="num"><pre>64</pre></span><pre>	</pre></div>
<div class="skip"><span class="num"><pre>65</pre></span><pre></pre></div>
</div>
</body>
</html>
